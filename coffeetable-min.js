(function(){var q,r,s;r={coffeescript_js:"http://code.alecperkins.net/coffeetable/lib/coffee_script-1.1.1-min.js",style:{position:"fixed",top:"5px",right:"5px"},local_storage:true,ls_key:"coffee-table",multi_line:false,indent:"    ",auto_suggest:true};typeof console!=="undefined"&&console!==null||(console={log:function(){},dir:function(){}});window.log=function(){return console.log(arguments)};window.dir=function(){return console.dir(arguments)};q=function(){function j(a){var e,b;if(a==null)a={};
h=r;for(e in a){b=a[e];h[e]=b}l={widget:{position:""+h.style.position,top:""+h.style.top,right:""+h.style.right,background:"rgba(255,255,255,0.9)",padding:"0",border:"2px solid white","z-index":"9999999","box-shadow":"0px 0px 4px #222","font-size":"12px","max-height":"95%"},button:{"float":"right",background:"white",border:"1px solid #ccc",color:"#991111",cursor:"pointer"},button_active:{background:"#991111",color:"white"},textarea:{"font-family":"monospace","font-size":"15px","min-width":"400px",
height:"22px",margin:"4px"},div:{display:"none"},CTHistory:{margin:"8px",padding:"4px 4px 4px 16px","font-family":"monospace","list-style-type":"circle","overflow-y":"scroll","max-height":""+(window.innerHeight-140)+"px"},li:{padding:"4px 4px 4px 4px",cursor:"pointer"},span:{padding:"4px","text-align":"center",cursor:"pointer","float":"left",color:"#555","font-variant":"small-caps",display:"none"},a:{padding:"4px","text-align":"center",cursor:"pointer","float":"right",color:"#555","font-variant":"small-caps"},
input:{"vertical-align":"middle"},p:{padding:"4px",margin:"0","float":"right",display:"inline-block",width:"80px",color:"#555","font-variant":"small-caps",display:"none","text-align":"right"},CTAutocomplete:{position:"absolute",top:"-14px",left:"-300px",display:"block",background:"rgba(255,255,255,0.9)","box-shadow":"0px 0px 4px #222",width:"250px","max-height":""+(window.innerHeight-140)+"px","overflow-y":"scroll"}};n={"function":{color:"#229922"},number:{color:"#222299"},string:{color:"#992222"},
undefined:{color:"grey","font-style":"italic"},object:{},"boolean":{color:"#229999"}};t="            <div>                <button>CoffeeTable</button>                <span>clear</span>                <a href='https://github.com/alecperkins/coffeetable' target='_blank'>?</a>                <p>multiline <input type='checkbox'></p>                <div>                    <textarea></textarea>                    <ul class='CTAutocomplete'></ul>                    <ul class='CTHistory'></ul>                </div>            </div>        ";
x();h.local_storage&&y()}var c,o,u,z,v,A,i,m,y,p,x,n,h,l,t,B;n=l=c=h=null;t="";o=false;m=0;i={source:[],result:[]};window.onresize=function(){var a;a=""+(window.innerHeight-140)+"px";c.CTAutocomplete.css("max-height",a);return c.CTHistory.css("max-height",a)};A=function(a){var e,b,d,g,f,k;d=a.split(".");b=[[window,"window"]];g=0;for(f=d.length;g<f;g++){a=d[g];a=a.replace("(","").replace(")","");a.length>0&&b[b.length-1][0][a]!=null&&b.push([b[b.length-1][0][a],a])}a=[];g=RegExp("^"+d[d.length-1]);
k=b[b.length-1][0];for(e in k){f=k[e];d=g.exec(e);if((d!=null?d.length:void 0)>0)a.push([e,typeof f])}a.sort();d="";g=0;for(f=b.length;g<f;g++){e=b[g];d+=e[1]+"."}b="<li style='font-weight:bold; text-decoration: underline; list-style-type: none'>"+d+"</li>";d=0;for(g=a.length;d<g;d++){e=a[d];b+="<li style='color:"+n[e[1]].color+"'>"+e[0]+"</li>"}return c.CTAutocomplete.html(b)};y=function(){var a,e;e=typeof localStorage!=="undefined"&&localStorage!==null?localStorage.getItem(h.ls_key):void 0;if(e!=
null){e=JSON.parse(e);a=function(){var b,d,g,f;if(typeof CoffeeScript!=="undefined"&&CoffeeScript!==null){f=[];d=0;for(g=e.length;d<g;d++){b=e[d];f.push(v(b))}return f}else return setTimeout(function(){return a()},500)};return a()}};v=function(a){var e,b,d,g,f,k,w;i.source.length===0&&c.CTHistory.empty();m=-1;i.source.push(a);b=null;g=e=false;try{d=CoffeeScript.compile(a,{bare:true})}catch(C){e=true;b=C}if(b==null)try{k=eval(d)}catch(D){g=true;b=D}if(b!=null)k=b;i.result.push(k);w=i.source.length-
1;f=$("<li>"+w+": <span>"+k+"</span></li>");f.css(l.li);f.find("span").css(n[typeof k]);if(e)f.css("color","orange");else g&&f.css("color","red");f.hover(function(){return f.css({background:"rgba(255,255,0,0.2)","list-style-type":"disc"})},function(){return f.css({background:"","list-style-type":""})});f.click(function(){p(false,w);return c.textarea.focus()});f.mousedown(function(){return f.css({background:"rgba(255,255,0,0.8)"})});f.mouseup(function(){return f.css({background:"rgba(255,255,0,0.2)"})});
f.prependTo(c.CTHistory);c.span.show();return typeof localStorage!=="undefined"&&localStorage!==null?localStorage.setItem(h.ls_key,JSON.stringify(i.source)):void 0};z=function(){c.CTHistory.empty();i.source=[];i.result=[];typeof localStorage!=="undefined"&&localStorage!==null&&localStorage.removeItem(h.ls_key);c.span.hide();u();return""};u=function(){var a;a=$("<li>type CoffeeScript, press enter</li>");a.css({"list-style-type":"none","text-align":"center"});return a.appendTo(c.CTHistory)};p=function(a,
e){if(a==null)a=false;if(e!=null)m=e+1;if(m===-1)m=i.source.length-1;else if(a)m+=1;else m-=1;if(i.source.length>1){c.textarea.val(i.source[m]);c.textarea.selectionStart=0;return c.textarea.selectionEnd=0}};B=function(){var a,e;h.multi_line=!h.multi_line;if(h.multi_line){e="4em";a="type CoffeeScript, press shift+enter"}else{e=l.textarea.height;a="type CoffeeScript, press enter"}c.textarea.css("height",e).focus();if(i.source.length===0)return c.CTHistory.find("li").text(a)};x=function(){var a,e,b;
b=$(t);c={widget:b,textarea:b.find("textarea"),CTAutocomplete:b.find("ul.CTAutocomplete"),CTHistory:b.find("ul.CTHistory"),button:b.find("button"),div:b.find("div"),span:b.find("span"),a:b.find("a"),input:b.find("input"),p:b.find("p"),li:b.find("li"),autocomplete:b.find("autocomplete")};for(e in c){a=c[e];a.css(l[e])}u();c.button.click(function(){if(o){c.button.css(l.button);c.div.hide();c.p.hide()}else{c.button.css(l.button_active);c.div.show();c.p.show();c.textarea.focus()}return o=!o});c.span.click(function(){return z()});
c.span.hover(function(){return c.span.css("color","#991111")},function(){return c.span.css("color",l.span.color)});c.input.click(function(){return B()});c.textarea.bind("keydown",function(d){var g;g=c.textarea.val();if(this.selectionStart===0)if(d.which===38)p();else d.which===40&&p(true);if(d.which===13&&(!h.multi_line||d.shiftKey)){d.preventDefault();if(g!==""){v(g);return c.textarea.val("")}}else if(d.which===9){d.preventDefault();d=this.selectionStart;this.value=this.value.substring(0,d)+h.indent+
this.value.substring(d);this.selectionStart=d+4;return this.selectionEnd=d+4}});c.textarea.bind("keyup",function(){var d;d=c.textarea.val();if(!h.multi_line&&h.auto_suggest)return A(d)});h.multi_line&&c.input.click();return b.appendTo("body")};j.prototype.show=function(){c.widget.show();return this};j.prototype.hide=function(){c.widget.hide();return this};return j}();s=function(){return window.coffeetable_instance=new q(window.coffeetable_settings)};$(document).ready(function(){var j;window.CoffeeTable=
q;if(window.CoffeeScript==null){j=document.createElement("script");j.type="application/javascript";j.src=r.coffeescript_js;$(j).bind("load",function(){return s()});return $("head").append(j)}else return s()})}).call(this);
