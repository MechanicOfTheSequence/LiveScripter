(function(){var o,p;p={coffeescript_js:"https://raw.github.com/alecperkins/coffeetable/master/lib/coffee_script-1.1.1-min.js",style:{position:"fixed",top:"5px",right:"5px"},local_storage:true,ls_key:"coffee-table"};window.log=function(){return console.log(arguments)};window.dir=function(){return console.dir(arguments)};o=function(){function q(b){var c,d;i=p;for(c in b){d=b[c];i[c]=d}k={widget:{position:""+i.style.position,top:""+i.style.top,right:""+i.style.right,background:"rgba(255,255,255,0.9)",
padding:"0",border:"2px solid white","z-index":"9999999","box-shadow":"0px 0px 4px #222","font-size":"12px"},button:{"float":"right",background:"white",border:"1px solid #ccc",color:"#991111"},button_active:{background:"#991111",color:"white"},textarea:{"font-family":"monospace","font-size":"1em","min-width":"400px","min-height":"2em",margin:"4px"},div:{display:"none"},ul:{margin:"4px",padding:"4px 4px 4px 16px","font-family":"monospace"},li:{padding:"4px 4px 4px 0",cursor:"pointer"},span:{padding:"4px",
"text-align":"center",cursor:"pointer","float":"right",color:"#ccc","font-variant":"small-caps",display:"none"}};r={"function":{color:"#229922"},number:{color:"#222299"},string:{color:"#992222"},undefined:{color:"grey","font-style":"italic"},object:{},"boolean":{color:"#229999"}};s="<div><button>CoffeeTable</button><div><textarea></textarea><ul></ul><span>clear</span></div></div>";v();w();i.local_storage&&x()}var a,m,y,t,g,j,v,x,n,w,r,i,k,s;r=k=a=i=null;s="";m=false;j=0;g={source:[],result:[]};x=
function(){var b,c;c=typeof localStorage!=="undefined"&&localStorage!==null?localStorage.getItem("coffee-table"):void 0;if(c!=null){c=JSON.parse(c);b=function(){var d,e,h,f;if(typeof CoffeeScript!=="undefined"&&CoffeeScript!==null){f=[];e=0;for(h=c.length;e<h;e++){d=c[e];f.push(t(d))}return f}else return setTimeout(function(){return b()},500)};return b()}};t=function(b){var c,d,e,h,f,l,u;j=-1;g.source.push(b);d=null;h=c=false;try{e=CoffeeScript.compile(b,{bare:true})}catch(z){c=true;d=z}if(d==null)try{l=
eval(e)}catch(A){h=true;d=A}if(d!=null)l=d;g.result.push(l);u=g.source.length-1;f=$("<li>"+u+": <span>"+l+"</span></li>");f.css(k.li);f.find("span").css(r[typeof l]);if(c)f.css("color","orange");else h&&f.css("color","red");f.hover(function(){return f.css({background:"rgba(255,255,0,0.2)","list-style-type":"disc"})},function(){return f.css({background:"","list-style-type":""})});f.click(function(){return n(false,u)});f.prependTo(a.ul);a.span.show();return typeof localStorage!=="undefined"&&localStorage!==
null?localStorage.setItem(i.ls_key,JSON.stringify(g.source)):void 0};y=function(){a.ul.empty();g.source=[];g.result=[];typeof localStorage!=="undefined"&&localStorage!==null&&localStorage.removeItem(i.ls_key);return a.span.hide()};n=function(b,c){if(b==null)b=false;if(c!=null)j=c+1;if(j===-1)j=g.source.length-1;else if(b)j+=1;else j-=1;if(g.source.length>1){a.textarea.val(g.source[j]);a.textarea.selectionStart=0;return a.textarea.selectionEnd=0}};w=function(){var b,c,d;d=$(s);a={widget:d,textarea:d.find("textarea"),
ul:d.find("ul"),button:d.find("button"),div:d.find("div"),span:d.find("span")};for(c in a){b=a[c];b.css(k[c])}a.button.click(function(){if(m){a.button.css(k.button);a.div.hide()}else{a.button.css(k.button_active);a.div.show();a.textarea.focus()}return m=!m});a.span.click(function(){return y()});a.span.hover(function(){return a.span.css("color","#991111")},function(){return a.span.css("color",k.span.color)});a.textarea.bind("keydown",function(e){var h;h=a.textarea.val();if(this.selectionStart===0)if(e.which===
38){console.log(j);n()}else e.which===40&&n(true);if(e.which===13&&e.shiftKey){e.preventDefault();if(h!==""){t(h);return a.textarea.val("")}}else if(e.which===9){e.preventDefault();e=this.selectionStart;this.value=this.value.substring(0,e)+"    "+this.value.substring(e);this.selectionStart=e+4;return this.selectionEnd=e+4}});return d.appendTo("body")};v=function(){var b;if(window.CoffeeScript==null){b=document.createElement("script");b.type="application/javascript";b.src=p.coffeescript_js;return $("head").append(b)}};
q.prototype.show=function(){a.widget.show();return this};q.prototype.hide=function(){a.widget.hide();return this};return q}();window.CoffeeTable=o;$(document).ready(function(){return window.coffeetable=new o})}).call(this);
